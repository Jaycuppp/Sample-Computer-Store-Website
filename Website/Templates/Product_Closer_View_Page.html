{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        
        <title> Quansh Technology Products </title>

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous"/>
        <link rel="stylesheet" type="text/css" href= "{% static 'Style.css' %}">
    </head>

    <body>
        <header> 
        <h1 id="Quansh_Tech_Product"> Quansh Tech Product </h1>
        {% include "Navbar.html"%} <br>
        </header>

        <main>
            <div id="Product_Card">
                <div class="container">
                    <div class="row">
                        <div class="col">
                            <div class="card" style="width: 24rem;">
                                <div class="card-body"> Need to Dynamically Reference Static DB Files Here 
                                <img class="card-img-top" id="Product_Image" src="{% static SingleProduct.Picture %}" alt="">
                                <h5 class="card-title" id="Product_Name_And_Brand"> {{ SingleProduct.Brand }} {{ SingleProduct.Name }} </h5>
                                <p class="card-text" id="Product_Description"> {{ SingleProduct.Description }} </p>

                                {% comment %} Missing the Promo Calculation Logic for the HTML Page {% endcomment %}
                                {% if SingleProduct.CouponName == "MLG360"%}
                                <p class="card-text" id="Product_Price"> <strong> Price: </strong> ${{ SingleProduct.Price}} </p>
                                
                                {% elif SingleProduct.CouponName == "MKBundle"%}
                                <p class="card-text" id="Product_Price"> <strong> Price: </strong> ${{ SingleProduct.Price }} </p>

                                {% else %}
                                <p class="card-text" id="Product_Price"> <strong> Price: </strong> ${{ SingleProduct.Price }} </p>
                                {% endif %}

                                {% comment %} Logic for When a Product is either Out of Stock and/or Discontinued {% endcomment %}

                                {% if SingleProduct.Discontinued == False and SingleProduct.Stock > 0 %}
                                <p class="stock-status" id="Product_Stock"> <strong> Available: </strong> {{ SingleProduct.Stock }} </p>

                                {% elif SingleProduct.Discontinued == False and SingleProduct.Stock == 0 or SingleProduct.Stock < 0 %}
                                <p class="stock-status" id="Product_Stock"> <strong> Currently Out Of Stock </strong> </p>

                                {% elif SingleProduct.Discontinued == True and SingleProduct.Stock > 0%}
                                <p class="stock-status" id="Product_Stock"> <strong> Discontinued, Only {{ SingleProduct.Stock }} Available </strong> </p>

                                {% elif SingleProduct.Discontinued == True and SingleProduct.Stock == 0 or SingleProduct.Stock < 0 %}
                                <p class="stock-status" id="Product_Stock"> <strong> Discontinued / EOL </strong> </p>

                                {% endif %}
                                
                                <a href="{% url 'ShoppingCart' %}" class="btn btn-success" id="Add_To_Cart_Button"> Add to cart </a> 
                                <a href="#" class="btn btn-info" id="Save_Item_Button"> Saved Item </a> 
                                <br> <br>


                                {% if user.is_authenticated %}
                                <a href="{% url 'UpdateProduct' SingleProduct.id %}" class="btn btn-secondary" id="Update_Button"> Update </a>
                                    {% if user.superuser %}
                                    <a href="{% url 'DeleteProduct' SingleProduct.id %}" class="btn btn-danger" id="Delete_Button"> Delete </a>
                                    {% endif %}
                                {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer> 
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"> </script>
        </footer>
    </body>
</html>
